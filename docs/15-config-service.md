# é…ç½®åƒæ•¸

Symfony çš„æœå‹™å®¹å™¨åŒ…å«æœå‹™ï¼Œä¹Ÿå¯ä»¥åŒ…å«[**æ‡‰ç”¨ç¨‹å¼åƒæ•¸**](https://github.com/symfony/dependency-injection/blob/5.4/ContainerInterface.php#L70)ã€‚

## config/services.yaml æ–‡ä»¶

åœ¨åŒ…å«æœå‹™é…ç½®çš„ `config/services.yaml` æª”æ¡ˆä¸­ï¼Œé‚„æœ‰ä¸€å€‹é è¨­ç‚ºç©ºçš„è¨­å®š `parameters` (åƒæ•¸)éƒ¨åˆ†ï¼š

```yaml
parameters:

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true
```

åœ¨æˆ‘å€‘å‰›å‰›æ’°å¯«çš„é›»å­éƒµä»¶ç™¼é€æœå‹™ä¸­ï¼Œæˆ‘å€‘æŒ‡æ˜äº†ä¸€å€‹ç™¼é€åœ°å€ï¼ˆ"admin@hb-corp.com"ï¼‰ã€‚

å•é¡Œæ˜¯ï¼šåœ¨æ‡‰ç”¨ç¨‹å¼ä¸­, æˆ‘å€‘å¦‚ä½•åœ¨æ‰€æœ‰éœ€è¦ä½¿ç”¨ç®¡ç†åœ°å€è‡ªå‹•ç™¼é€é›»å­éƒµä»¶çš„åœ°æ–¹é¿å…é‡è¤‡ä½¿ç”¨é€™å€‹é›»å­éƒµä»¶åœ°å€ï¼Ÿ

æˆ‘å€‘å¯ä»¥å°‡è©²è®Šé‡ä½œç‚º**åƒæ•¸**è²æ˜åˆ° `config/services.yaml` æª”æ¡ˆä¸­ï¼š

```yaml
parameters:
    app.admin_email: "admin@hb-corp.com"

services:
    # ...
```

:::info ç’°å¢ƒè®Šé‡ï¼Ÿ

é€™é¡æ•¸æ“šèˆ‡ç’°å¢ƒè®Šé‡æœ‰ä½•ä¸åŒï¼Ÿ å¾ˆç°¡å–®ï¼Œå› ç‚ºå¾ä¸€å€‹ç’°å¢ƒåˆ°å¦ä¸€å€‹ç’°å¢ƒï¼Œç”¨æ–¼ç™¼é€è‡ªå‹•éƒµä»¶çš„ç®¡ç†é›»å­éƒµä»¶ä¸æœƒæ”¹è®Šã€‚ é€™æ˜¯æ‡‰ç”¨ç¨‹å¼çš„æ•¸æ“šï¼Œè€Œä¸æ˜¯åŸ·è¡Œç’°å¢ƒçš„æ•¸æ“šã€‚

å®ƒæœƒéš¨æ‡‰ç”¨ç¨‹å¼çš„ç’°å¢ƒè€Œæ”¹è®Šå—ï¼Ÿ é‚£å°±å°‡å…¶è¨­ç‚ºç’°å¢ƒè®Šé‡ ğŸ˜„ ã€‚

:::

ä¹‹å¾Œï¼Œæˆ‘å€‘å¸Œæœ›èƒ½åœ¨æœå‹™ä¸­ä½¿ç”¨é€™å€‹è®Šé‡ã€‚ æˆ‘å€‘å¯ä»¥å°‡å…¶**è¨»å…¥**åˆ°å»ºæ§‹å‡½æ•¸ä¸­ï¼š

```php
class NewsletterSubscribed
{
  private $mailer;
  private $adminEmail;

  public function __construct(MailerInterface $mailer, string $adminEmail)
  {
    $this->mailer = $mailer;
    $this->adminEmail = $adminEmail;
  }
}
```

åœ¨æ­¤éšæ®µï¼Œæˆ‘å€‘åªéœ€åœ¨å»ºæ§‹å‡½å¼ä¸­æŒ‡å‡ºæœå‹™åœ¨å»ºç½®æ™‚éœ€è¦ `string $adminEmail`ï¼Œå¾è€Œå®šç¾©æœå‹™ã€‚ å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œè‡ªå‹•çµ„è£é©ç”¨æ–¼æœå‹™ï¼Œä½†ä¸é©ç”¨æ–¼åƒæ•¸ã€‚

## æ‰‹å‹•æœå‹™é…ç½®

åœ¨ `config/services.yaml` æª”æ¡ˆä¸­ï¼Œæˆ‘å€‘å¯ä»¥æ±ºå®šæ‰‹å‹•è¨­å®šæœå‹™ï¼Œä»¥ä¾¿åœ¨å»ºç½®æœå‹™æ™‚è‡ªå‹•æä¾› `app.admin_email` åƒæ•¸ã€‚ æˆ‘å€‘å¯ä»¥åœ¨æ–‡ä»¶åº•éƒ¨æ·»åŠ  ï¼š

```yaml
App\Mail\NewsletterSubscribed:
    arguments:
        $adminEmail: "%app.admin_email%"
```

å› æ­¤ï¼Œåœ¨å»ºç½®æœå‹™æ™‚ï¼Œæ‡‰ç”¨ç¨‹å¼åƒæ•¸çš„å€¼å°‡è‡ªå‹•æä¾›çµ¦å»ºæ§‹å‡½å¼ä¸­çš„ `$adminEmail` åƒæ•¸ã€‚

## è‡ªå‹•é…ç½®æ‰€æœ‰æœå‹™

æ‰‹å‹•é…ç½®æœå‹™å¾ˆæœ‰è¶£ï¼Œä½†å°‡æ­¤è®Šé‡ä½œç‚ºæ‡‰ç”¨ç¨‹å¼åƒæ•¸å‚³éçš„æœ€åˆç›®çš„æ˜¯ç‚ºäº†èƒ½åœ¨æ‰€æœ‰éœ€è¦å®ƒçš„æœå‹™ï¼ˆç¾åœ¨æˆ–å°‡ä¾†ï¼‰ä¸­ä½¿ç”¨å®ƒã€‚

é€™æ¨£ï¼Œæˆ‘å€‘å°±èƒ½ç›¡é‡é¿å…æ¯æ¬¡å»ºç«‹è¦å‚³é€é›»å­éƒµä»¶çš„æœå‹™æ™‚ï¼Œéƒ½å¿…é ˆæ‰‹å‹•è¨­å®šè©²æœå‹™æ‰èƒ½ä½¿ç”¨ `app.admin_email` è®Šé‡çš„æƒ…æ³...

æˆ‘å€‘ä¹Ÿå¯ä»¥é…ç½®å®¹å™¨ï¼Œä½¿å…¶è‡ªå‹•å°‡æœå‹™ä¸­çš„å»ºæ§‹å‡½å¼åƒæ•¸*ç¶å®š*(bind)åˆ°æŸå€‹å€¼ï¼š

```yaml
services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
        bind:
            string $adminEmail: "%app.admin_email%"
```

:::note åƒæ•¸é¡å‹
æ³¨æ„ï¼Œæˆ‘å€‘æ–°å¢äº† `string` å­—ä¸²é¡å‹ï¼Œé€™æ˜¯ç‚ºäº†åœ¨å®šç¾©èˆ‡åƒæ•¸é—œè¯çš„å€¼æ™‚æ›´åŠ ç²¾ç¢ºã€‚
:::
ç¾åœ¨ï¼Œä»»ä½•åœ¨å…¶å»ºæ§‹å‡½å¼ä¸­å®£å‘Šå­—ä¸²åƒæ•¸ `$adminEmail` çš„æœå‹™éƒ½æœƒè‡ªå‹•æ³¨å…¥ä½æ–¼ `app.admin_email` ä¸­çš„å€¼ã€‚
